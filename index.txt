<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>巡回リスト</title>

  <!-- キャッシュ強め対策：バージョンクエリ -->
  <link rel="stylesheet" href="style.css?v=20250830" />
  <style>
    /* 万一 style.css が読み込まれない時の最低限フォールバック */
    :root { --accent:#2b6bf6; --fg:#0e1a2b; --muted:#64748b; --chip:#eff4ff; }
    body{font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; margin:0; background:#f6f7fb; color:var(--fg);}
    .appbar{position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:#fff;border-bottom:1px solid #e6e8ef;}
    .title{font-size:20px;font-weight:800;letter-spacing:.04em;}
    .btns{display:flex;gap:10px;}
    .btn{appearance:none;border:1px solid #d7dbe7;padding:8px 14px;border-radius:12px;cursor:pointer;background:#fff;font-size:14px;display:flex;align-items:center;gap:6px;transition:.2s;}
    .btn:active{transform:scale(.95);}
    .btn.sync{border-color:var(--accent);color:var(--accent);}
    main{padding:20px 16px;}
    h1{font-size:20px;margin:0 0 10px 0;font-weight:bold;}
    .card{display:block;background:#fff;border-radius:24px;box-shadow:0 6px 16px -2px rgba(18,22,33,.08);margin:0 0 16px 0;padding:20px;border:1px solid #fff;transition:.3s;text-decoration:none;color:inherit;}
    .card h2{font-size:18px;margin:0;font-weight:700;}
    .meta{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;}
    .chip{font-size:12px;font-weight:500;background:var(--chip);color:var(--accent);padding:4px 10px;border-radius:6px;}
    .overall{margin-top:20px;display:flex;align-items:center;gap:8px;}
    #overallHint{font-size:14px;color:var(--muted);margin:0;}
    #overallHint.empty{font-size:14px;color:var(--accent);font-weight:600;}
    .progress-modal{position:fixed;bottom:0;left:0;width:100%;z-index:9999;transition:.3s;background:rgba(255,255,255,.9);backdrop-filter:blur(4px);padding:10px 16px;box-shadow:0 -6px 16px -2px rgba(18,22,33,.08);border-top-left-radius:24px;border-top-right-radius:24px;transform:translateY(100%);}
    .progress-modal.is-visible{transform:translateY(0%);}
    .progress-modal[hidden]{display:none;}
    .progress-bar-container{width:100%;height:6px;background:#eee;border-radius:3px;overflow:hidden;margin-top:10px;}
    .progress-bar{height:100%;background:var(--accent);transition:width .3s linear;}
  </style>
</head>
<body>
  <div class="appbar">
    <div class="title">巡回リスト</div>
    <div class="btns">
      <button id="syncBtn" class="btn sync">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-cw"><path d="M21 12a9 9 0 1 1-9-9c2.72 0 5.18 1.15 6.96 3L21 3"/><path d="M21 3v9h-9"/></svg>
        同期
      </button>
      <button id="recalcBtn" class="btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9v10"/><path d="M10 21h4v-4"/></svg>
        再計算
      </button>
    </div>
  </div>

  <main>
    <section>
      <h1>各エリアの集計</h1>
      <a id="card-yamato" class="card" href="yamato.html" data-city="大和市">
        <h2>大和市</h2>
        <div class="meta">
          <span class="chip">済 <span id="yamato-done">0</span></span>
          <span class="chip">停 <span id="yamato-stop">0</span></span>
          <span class="chip">不要 <span id="yamato-skip">0</span></span>
          <span class="chip">総 <span id="yamato-total">0</span></span>
        </div>
      </a>

      <a id="card-ebina" class="card" href="ebina.html" data-city="海老名市">
        <h2>海老名市</h2>
        <div class="meta">
          <span class="chip">済 <span id="ebina-done">0</span></span>
          <span class="chip">停 <span id="ebina-stop">0</span></span>
          <span class="chip">不要 <span id="ebina-skip">0</span></span>
          <span class="chip">総 <span id="ebina-total">0</span></span>
        </div>
      </a>

      <a id="card-chofu" class="card" href="chofu.html" data-city="調布市">
        <h2>調布市</h2>
        <div class="meta">
          <span class="chip">済 <span id="chofu-done">0</span></span>
          <span class="chip">停 <span id="chofu-stop">0</span></span>
          <span class="chip">不要 <span id="chofu-skip">0</span></span>
          <span class="chip">総 <span id="chofu-total">0</span></span>
        </div>
      </a>
    </section>

    <!-- 全体合計（必要なら app.js が使用） -->
    <p id="overallHint" class="empty">まだ同期されていません</p>
    <p class="overall"><small>全体:</small> <span id="overallTotal">0</span></p>

    <!-- GASのURLをデータ属性に保存 -->
    <div id="app-config" data-gas-url="https://script.google.com/macros/s/AKfycbxrIC6V1olx_Jo5eLGRWRwLoJtNZLxs1I9ZHjyNWv-ZqQiXPWeph5JWhnJkqgRZT1HszQ/exec"></div>
  </main>

  <!-- 同期中モーダル -->
  <div id="progressModal" class="progress-modal" hidden>
    <p id="statusText">同期中...</p>
    <div class="progress-bar-container">
      <div id="progressBar" class="progress-bar" style="width:0%;"></div>
    </div>
  </div>
  
  <script src="app.js?v=20250831"></script>
</body>
</html>

