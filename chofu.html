<!doctype html><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>調布市 巡回</title><script>var ENDPOINT='https://script.google.com/macros/s/AKfycbzjsPGgz2LRNs5uRcwql6B4bqafRR1JkwMfPQiyyShwyQZzmVGiWbTUuWhJV_q4g-kfpA/exec';var SECRET='rkw123';</script>
<style>
  :root{ --bg:#f6f7fb; --surface:#fff; --border:#e6e8ee; --text:#111; --muted:#6b7280; --accent:#111; --checked:#ffe8ef; }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  header{position:sticky;top:0;background:#fff;padding:10px 12px;border-bottom:1px solid var(--border);z-index:10;display:flex;gap:8px;align-items:center}
  header a{text-decoration:none;border:1px solid var(--border);padding:8px 12px;border-radius:12px;color:#111}
  header .count{margin-left:auto;font-weight:700;color:#6b7280;font-variant-numeric:tabular-nums}
  main{padding:12px 12px 24px;max-width:820px;margin:0 auto}
  .card{display:flex;align-items:center;gap:12px;background:#fff;border:1px solid var(--border);border-radius:14px;padding:12px;margin-bottom:10px;box-shadow:0 1px 2px rgba(0,0,0,.04);transition:background .15s,border-color .15s}
  .card.checked{background:#ffe8ef;border-color:#f8c9d7}
  .chk-wrap{position:relative;display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;flex:none}
  .chk{appearance:none;width:0;height:0;position:absolute;opacity:0}
  .fake{display:inline-block;width:20px;height:20px;border:2px solid var(--border);border-radius:6px;background:#fff}
  .chk:checked + .fake{border-color:#111;background:#111;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="white" d="M6.6 11.6L3.5 8.5l1.1-1.1 2 2 4-4 1.1 1.1z"/></svg>');background-repeat:no-repeat;background-position:center}
  .body{flex:1;min-width:0}
  .title{font-weight:700;white-space:normal;word-break:break-word;line-height:1.35;margin-bottom:2px}
  .meta{margin-top:4px;color:#6b7280;font-size:14px;line-height:1.5}
  .meta .line{white-space:normal;word-break:break-word}
  .meta .line.small{font-size:12px}
  .date-badge{min-width:54px;text-align:center;font-variant-numeric:tabular-nums;color:#6b7280;font-weight:700}
</style>
<header><a href='index.html'>戻る</a><h1 style='margin:0;flex:1;text-align:center;font-size:18px'>調布市 巡回</h1><span id='count' class='count'>0/54</span></header><main><div class='toolbar' style='display:flex;gap:8px;justify-content:center;margin:8px 0 12px'><button onclick='checkAll()' style='padding:8px 12px;border:1px solid #e6e8ee;border-radius:999px;background:#fff'>全てチェック</button><button onclick='uncheckAll()' style='padding:8px 12px;border:1px solid #e6e8ee;border-radius:999px;background:#fff'>全て外す</button><button onclick='clearAll()' style='padding:8px 12px;border:1px solid #f2c6c4;border-radius:999px;background:#fff5f4;color:#b42318'>リセット</button></div>
    <div class="card" data-city="調布市" data-index="0" data-station="タイムズ調布下石原第２" data-model="ノート" data-plate="多摩502ワ7204">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布下石原第２</div>
        <div class="meta"><div class='line'>ノート</div><div class='line'>多摩502ワ7204</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="1" data-station="タイムズ調布下石原第３" data-model="ソリオ" data-plate="多摩502ワ7730">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布下石原第３</div>
        <div class="meta"><div class='line'>ソリオ</div><div class='line'>多摩502ワ7730</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="2" data-station="タイムズ調布下石原第３" data-model="ヤリス" data-plate="多摩502ワ5494">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布下石原第３</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ5494</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="3" data-station="タイムズ調布下石原第３" data-model="アクア" data-plate="多摩503ワ1004">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布下石原第３</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩503ワ1004</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="4" data-station="下石原２丁目第２" data-model="MAZDA2" data-plate="多摩502ワ8969">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">下石原２丁目第２</div>
        <div class="meta"><div class='line'>MAZDA2</div><div class='line'>多摩502ワ8969</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="5" data-station="下石原２丁目第２" data-model="ノート" data-plate="多摩502ワ9171">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">下石原２丁目第２</div>
        <div class="meta"><div class='line'>ノート</div><div class='line'>多摩502ワ9171</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="6" data-station="下石原２丁目" data-model="フィット" data-plate="多摩502ワ5930">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">下石原２丁目</div>
        <div class="meta"><div class='line'>フィット</div><div class='line'>多摩502ワ5930</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="7" data-station="下石原２丁目" data-model="スイフト" data-plate="多摩502ワ9693">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">下石原２丁目</div>
        <div class="meta"><div class='line'>スイフト</div><div class='line'>多摩502ワ9693</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="8" data-station="タイムズ調布下石原第４" data-model="ノート" data-plate="多摩502ワ7095">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布下石原第４</div>
        <div class="meta"><div class='line'>ノート</div><div class='line'>多摩502ワ7095</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="9" data-station="タイムズ調布下石原第４" data-model="アクア" data-plate="多摩503ワ598">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布下石原第４</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩503ワ598</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="10" data-station="フィールドコート調布" data-model="ヤリス" data-plate="多摩503ワ918">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">フィールドコート調布</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩503ワ918</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="11" data-station="タイムズ調布小島町第２" data-model="ソリオ" data-plate="多摩502ワ7447">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>ソリオ</div><div class='line'>多摩502ワ7447</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="12" data-station="タイムズ調布小島町第２" data-model="ヤリス" data-plate="多摩502ワ5514">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ5514</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="13" data-station="タイムズ調布小島町第２" data-model="ヤリスクロス" data-plate="多摩300ワ7433">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>ヤリスクロス</div><div class='line'>多摩300ワ7433</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="14" data-station="タイムズ調布小島町第２" data-model="ヤリスクロス" data-plate="多摩300ワ9657">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>ヤリスクロス</div><div class='line'>多摩300ワ9657</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="15" data-station="タイムズ調布小島町第２" data-model="アクア" data-plate="多摩502ワ9391">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩502ワ9391</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="16" data-station="タイムズ調布小島町第２" data-model="アクア" data-plate="多摩503ワ1006">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩503ワ1006</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="17" data-station="タイムズ調布小島町第２" data-model="シエンタ" data-plate="多摩502ワ8357">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>シエンタ</div><div class='line'>多摩502ワ8357</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="18" data-station="タイムズ調布小島町第２" data-model="スイフト" data-plate="多摩503ワ19">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２</div>
        <div class="meta"><div class='line'>スイフト</div><div class='line'>多摩503ワ19</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="19" data-station="タイムズ調布小島町第２（ＥＶ）" data-model="サクラ" data-plate="多摩580ワ5206">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布小島町第２（ＥＶ）</div>
        <div class="meta"><div class='line'>サクラ</div><div class='line'>多摩580ワ5206</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="20" data-station="調布ルピナス駐車場" data-model="N BOX" data-plate="多摩580ワ4533">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布ルピナス駐車場</div>
        <div class="meta"><div class='line'>N BOX</div><div class='line'>多摩580ワ4533</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="21" data-station="シスコンパーク調布小島町第１" data-model="ライズ" data-plate="多摩502ワ5454">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>ライズ</div><div class='line'>多摩502ワ5454</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="22" data-station="シスコンパーク調布小島町第１" data-model="MAZDA3" data-plate="多摩300ワ9166">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>MAZDA3</div><div class='line'>多摩300ワ9166</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="23" data-station="シスコンパーク調布小島町第１" data-model="MAZDA2" data-plate="多摩502ワ8797">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>MAZDA2</div><div class='line'>多摩502ワ8797</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="24" data-station="シスコンパーク調布小島町第１" data-model="MAZDA2" data-plate="多摩503ワ1015">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>MAZDA2</div><div class='line'>多摩503ワ1015</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="25" data-station="シスコンパーク調布小島町第１" data-model="オーラ" data-plate="多摩300ワ8929">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>オーラ</div><div class='line'>多摩300ワ8929</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="26" data-station="シスコンパーク調布小島町第１" data-model="ソリオ" data-plate="多摩502ワ8821">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>ソリオ</div><div class='line'>多摩502ワ8821</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="27" data-station="シスコンパーク調布小島町第１" data-model="ヤリス" data-plate="多摩502ワ7631">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">シスコンパーク調布小島町第１</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ7631</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="28" data-station="調布小島町２丁目" data-model="MAZDA2" data-plate="多摩503ワ71">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布小島町２丁目</div>
        <div class="meta"><div class='line'>MAZDA2</div><div class='line'>多摩503ワ71</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="29" data-station="調布小島町２丁目第２" data-model="CX-30" data-plate="多摩300ワ7854">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布小島町２丁目第２</div>
        <div class="meta"><div class='line'>CX-30</div><div class='line'>多摩300ワ7854</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="30" data-station="調布小島町２丁目第２" data-model="ノア" data-plate="多摩300ワ9110">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布小島町２丁目第２</div>
        <div class="meta"><div class='line'>ノア</div><div class='line'>多摩300ワ9110</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="31" data-station="調布小島町３丁目" data-model="ノート" data-plate="多摩503ワ765">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布小島町３丁目</div>
        <div class="meta"><div class='line'>ノート</div><div class='line'>多摩503ワ765</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="32" data-station="調布小島町３丁目" data-model="ヤリス" data-plate="多摩503ワ773">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布小島町３丁目</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩503ワ773</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="33" data-station="ＵＲシティハイツ調布小島町" data-model="オーラ" data-plate="多摩300ワ8750">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">ＵＲシティハイツ調布小島町</div>
        <div class="meta"><div class='line'>オーラ</div><div class='line'>多摩300ワ8750</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="34" data-station="調布上石原月極駐車場" data-model="ヤリス" data-plate="多摩502ワ5528">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布上石原月極駐車場</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ5528</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="35" data-station="調布上石原月極駐車場" data-model="ヤリス" data-plate="多摩502ワ7979">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布上石原月極駐車場</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ7979</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="36" data-station="タイムズ調布多摩川第８" data-model="ルーミー" data-plate="多摩502ワ8436">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布多摩川第８</div>
        <div class="meta"><div class='line'>ルーミー</div><div class='line'>多摩502ワ8436</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="37" data-station="タイムズ調布多摩川第８" data-model="シエンタ" data-plate="多摩502ワ4138">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布多摩川第８</div>
        <div class="meta"><div class='line'>シエンタ</div><div class='line'>多摩502ワ4138</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="38" data-station="タイムズ調布多摩川第６（２）" data-model="アクア" data-plate="多摩502ワ9632">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布多摩川第６（２）</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩502ワ9632</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="39" data-station="タイムズ調布多摩川第６（１）" data-model="ノート" data-plate="多摩502ワ9831">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布多摩川第６（１）</div>
        <div class="meta"><div class='line'>ノート</div><div class='line'>多摩502ワ9831</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="40" data-station="タイムズ調布多摩川第６（１）" data-model="ヤリス" data-plate="多摩503ワ450">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布多摩川第６（１）</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩503ワ450</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="41" data-station="タイムズ調布多摩川第６（１）" data-model="アクア" data-plate="多摩503ワ582">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ調布多摩川第６（１）</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩503ワ582</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="42" data-station="多摩川月極駐車場" data-model="ハスラー" data-plate="多摩580ワ4004">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">多摩川月極駐車場</div>
        <div class="meta"><div class='line'>ハスラー</div><div class='line'>多摩580ワ4004</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="43" data-station="調布多摩川７丁目" data-model="ソリオ" data-plate="多摩503ワ38">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布多摩川７丁目</div>
        <div class="meta"><div class='line'>ソリオ</div><div class='line'>多摩503ワ38</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="44" data-station="調布多摩川７丁目" data-model="アクア" data-plate="多摩503ワ5">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">調布多摩川７丁目</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩503ワ5</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="45" data-station="タイムズ飛田給第２" data-model="MAZDA2" data-plate="多摩502ワ6880">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給第２</div>
        <div class="meta"><div class='line'>MAZDA2</div><div class='line'>多摩502ワ6880</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="46" data-station="タイムズ飛田給第２" data-model="ヤリス" data-plate="多摩502ワ8007">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給第２</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ8007</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="47" data-station="タイムズ飛田給第２" data-model="アクア" data-plate="多摩502ワ8428">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給第２</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩502ワ8428</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="48" data-station="タイムズ飛田給第２" data-model="アクア" data-plate="多摩502ワ4452">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給第２</div>
        <div class="meta"><div class='line'>アクア</div><div class='line'>多摩502ワ4452</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="49" data-station="タイムズ飛田給第２" data-model="スイフト" data-plate="多摩503ワ162">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給第２</div>
        <div class="meta"><div class='line'>スイフト</div><div class='line'>多摩503ワ162</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="50" data-station="タイムズ飛田給第２" data-model="プリウス" data-plate="多摩300ワ8523">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給第２</div>
        <div class="meta"><div class='line'>プリウス</div><div class='line'>多摩300ワ8523</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="51" data-station="タイムズ飛田給２丁目１１" data-model="ノート" data-plate="多摩502ワ7389">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給２丁目１１</div>
        <div class="meta"><div class='line'>ノート</div><div class='line'>多摩502ワ7389</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="52" data-station="タイムズ飛田給２丁目１１" data-model="ヤリス" data-plate="多摩502ワ8532">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">タイムズ飛田給２丁目１１</div>
        <div class="meta"><div class='line'>ヤリス</div><div class='line'>多摩502ワ8532</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div>

    <div class="card" data-city="調布市" data-index="53" data-station="飛田給３丁目" data-model="CX-5" data-plate="多摩300ワ9253">
      <label class="chk-wrap">
        <input type="checkbox" class="chk">
        <span class="fake"></span>
      </label>
      <div class="body">
        <div class="title">飛田給３丁目</div>
        <div class="meta"><div class='line'>CX-5</div><div class='line'>多摩300ワ9253</div></div>
      </div>
      <div class="date-badge" title="タップで手入力"></div>
    </div></main><script>(function(){var CITY='調布市';var total=54;var cards=[].slice.call(document.querySelectorAll('.card'));var countEl=document.getElementById('count');function keyFor(i){return 'chk:'+CITY+':'+i;}function save(i,c,d){localStorage.setItem(keyFor(i),JSON.stringify({checked:c,date:d}));}function load(i){try{return JSON.parse(localStorage.getItem(keyFor(i)))||null}catch(e){return null}}function fmtDate(d){var m=('0'+(d.getMonth()+1)).slice(-2),day=('0'+d.getDate()).slice(-2);return m+'-'+day;}function nowISO(){return new Date().toISOString();}function updateCount(){var c=cards.filter(c=>c.classList.contains('checked')).length;if(countEl)countEl.textContent=c+'/'+total;try{localStorage.setItem('巡回:stats:'+CITY,JSON.stringify({checked:c,total:total}))}catch(e){}}function post(p){try{fetch(ENDPOINT,{method:'POST',headers:{'Content-Type':'text/plain'},body:JSON.stringify(Object.assign({secret:SECRET},p))})}catch(e){}}function onPayload(card,i,ds){return{ts:nowISO(),city:CITY,index:i,station_name:card.getAttribute('data-station')||'',vehicle_model:card.getAttribute('data-model')||'',plate_number:card.getAttribute('data-plate')||'',date_badge:ds||'',checked:true}}function offPayload(card){return{city:CITY,plate_number:card.getAttribute('data-plate')||'',delete:true}}cards.forEach(function(card,i){var chk=card.querySelector('.chk');var badge=card.querySelector('.date-badge');var data=load(i);if(data&&data.checked){card.classList.add('checked');if(badge)badge.textContent=data.date||'';chk.checked=true;}chk.addEventListener('change',function(){var ds=fmtDate(new Date());if(chk.checked){card.classList.add('checked');if(badge)badge.textContent=ds;save(i,true,ds);post(onPayload(card,i,ds));}else{card.classList.remove('checked');if(badge)badge.textContent='';save(i,false,'');post(offPayload(card));}updateCount();});if(badge){badge.addEventListener('click',function(){var input=prompt('MM-DD で入力（例: 08-27）',badge.textContent||fmtDate(new Date()));if(input){var isChecked=card.classList.contains('checked');badge.textContent=input;save(i,isChecked,input);if(isChecked)post(onPayload(card,i,input));}});}});updateCount();window.checkAll=function(){var ds=fmtDate(new Date());cards.forEach(function(card,i){var chk=card.querySelector('.chk');var badge=card.querySelector('.date-badge');if(!chk.checked){chk.checked=true;card.classList.add('checked');if(badge)badge.textContent=ds;save(i,true,ds);post(onPayload(card,i,ds));}});updateCount();};window.uncheckAll=function(){cards.forEach(function(card,i){var chk=card.querySelector('.chk');var badge=card.querySelector('.date-badge');if(chk.checked){chk.checked=false;card.classList.remove('checked');if(badge)badge.textContent='';save(i,false,'');post(offPayload(card));}});updateCount();};window.clearAll=function(){if(!confirm('よろしいですか？'))return;cards.forEach(function(card,i){var chk=card.querySelector('.chk');var badge=card.querySelector('.date-badge');var was=chk.checked;chk.checked=false;card.classList.remove('checked');if(badge)badge.textContent='';localStorage.removeItem(keyFor(i));if(was)post(offPayload(card));});updateCount();};})();</script>
<style>
  .toolbar{display:none !important;}
  .idx-badge{
    width: 28px; min-width:28px;
    text-align: center;
    font-variant-numeric: tabular-nums;
    color: #6b7280;
    font-weight: 700;
    user-select: none;
  }
  .card .chk-wrap{ margin-left: 0; }
  .date-badge{ line-height: 1.05; display:inline-block; text-align:center; white-space:normal; }
  .db-mmdd{ font-weight:700; }
  .db-hm{ font-size: 12px; opacity: .8; }
  .del-btn{ display:inline-block !important; visibility:visible !important; opacity:1 !important; }
</style>
<script>
// ---- auto-log patch v18d (per-container sorting, stable count) ----
(function(){
  if(window.__autoLogPatchedV18d) return; window.__autoLogPatchedV18d = true;
  var ENDPOINT="https://script.google.com/macros/s/AKfycbzjsPGgz2LRNs5uRcwql6B4bqafRR1JkwMfPQiyyShwyQZzmVGiWbTUuWhJV_q4g-kfpA/exec", SECRET="rkw123";
  window.checkAll=function(){}; window.uncheckAll=function(){}; window.clearAll=function(){};

  // Remove header help text containing "日付を編集"
  var header = document.querySelector('header');
  if(header){
    Array.prototype.slice.call(header.querySelectorAll('*')).forEach(function(n){
      var t = (n.textContent||'').replace(/\s+/g,'');
      if(t.indexOf('日付を編集') !== -1){ n.remove(); }
    });
  }

  var _q=[], _busy=false;
  function enqueue(p){ _q.push(p); if(!_busy) pump(); }
  async function pump(){ _busy=true; while(_q.length){ var body=JSON.stringify(Object.assign({secret:SECRET}, _q.shift())); try{ await fetch(ENDPOINT,{method:'POST',headers:{'Content-Type':'text/plain'},body}); }catch(e){} await new Promise(r=>setTimeout(r,120)); } _busy=false; }

  function nowJST(){
    var d = new Date();
    function pad(n){ return ('0'+n).slice(-2); }
    return d.getFullYear() + '/' + pad(d.getMonth()+1) + '/' + pad(d.getDate()) + ' ' + pad(d.getHours()) + ':' + pad(d.getMinutes());
  }
  function partsNow(){
    var d = new Date();
    function pad(n){ return ('0'+n).slice(-2); }
    return { mmdd: pad(d.getMonth()+1)+'/'+pad(d.getDate()), hm: pad(d.getHours())+':'+pad(d.getMinutes()) };
  }
  function badgeHTML(mmdd,hm){ return '<div class="db-mmdd">'+mmdd+'</div><div class="db-hm">'+hm+'</div>'; }

  function text(el, sel){ var t = el && el.querySelector(sel); return t ? (t.textContent||'').trim() : ''; }
  function metaLines(card){ return Array.prototype.map.call(card.querySelectorAll('.meta .line'), function(x){return (x.textContent||'').trim();}); }
  function fallbackFields(card){
    var station = text(card,'.title');
    var lines = metaLines(card);
    var model = lines.length ? lines[0] : '';
    var plate = lines.length>1 ? lines[1] : '';
    return {station_name:station, vehicle_model:model, plate_number:plate};
  }
  function pickAttr(card, name, fb){ var v = card.getAttribute(name); return (v && v.trim()) ? v.trim() : (fb || ''); }

  function setup(){
    var H1=document.querySelector('h1'); var CITY=(H1&&H1.textContent)?H1.textContent.replace(' 巡回','').trim():'';
    var allCards=[].slice.call(document.querySelectorAll('.card')); 
    if(allCards.length===0) return;
    var countEl=document.getElementById('count');

    // Stable baseline from startup
    var BASE = allCards.slice();
    var BASE_TOTAL = BASE.length;

    function key(i){return 'chk:'+CITY+':'+i;} 
    function save(i,c,d){try{localStorage.setItem(key(i),JSON.stringify({checked:c,date:d}))}catch(e){}}
    function load(i){try{return JSON.parse(localStorage.getItem(key(i)))||null}catch(e){return null}}

    function updateCount(){
      var checked = BASE.filter(function(c){ return c.classList.contains('checked'); }).length;
      if(countEl) countEl.textContent = checked + '/' + BASE_TOTAL;
      try{localStorage.setItem('巡回:stats:'+CITY,JSON.stringify({checked:checked,total:BASE_TOTAL}))}catch(e){}
    }

    // Build container -> cards mapping and remember each original parent & nextSibling
    var containerMap = new Map();
    allCards.forEach(function(card){
      var parent = card.parentNode;
      if(!containerMap.has(parent)) containerMap.set(parent, []);
      containerMap.get(parent).push(card);
      if(!card.__origParent){ card.__origParent = parent; card.__origNext = card.nextSibling; }
    });

    function restoreToOriginal(card){
      var p = card.__origParent, n = card.__origNext;
      if(!p) return;
      if(n && n.parentNode === p){
        p.insertBefore(card, n);
      }else{
        p.appendChild(card);
      }
    }

    // Resort within a specific container only
    function resortContainer(parent){
      var list = containerMap.get(parent);
      if(!list) return;
      var unchecked = list.filter(function(c){ return !c.classList.contains('checked'); });
      var checked = list.filter(function(c){ return c.classList.contains('checked'); });
      unchecked.sort(function(a,b){ return (+a.dataset.orig) - (+b.dataset.orig); });
      checked.sort(function(a,b){ return (+a.dataset.idx) - (+b.dataset.idx); });
      unchecked.concat(checked).forEach(function(c){
        if(c.parentNode !== parent){
          // If card somehow moved, restore to original parent first
          restoreToOriginal(c);
        }
        parent.appendChild(c);
      });
    }

    // Initial per-container resort (for restored checks)
    containerMap.forEach(function(_, parent){ resortContainer(parent); });

    allCards.forEach(function(card,i){
      if(card.__patchedV18d) return; card.__patchedV18d=true;
      var chk=card.querySelector('.chk'); var badge=card.querySelector('.date-badge'); var data=load(i);

      // index/元順のメタを保持
      card.dataset.orig = i;       // 元の並び用（0-based）
      card.dataset.idx  = i+1;     // 表示インデックス（1-based）

      // index badge (1-start)
      if(!card.querySelector('.idx-badge')){
        var idxSpan = document.createElement('span');
        idxSpan.className = 'idx-badge';
        idxSpan.textContent = String(i+1);
        if(card.firstElementChild){ card.insertBefore(idxSpan, card.firstElementChild); } else { card.prepend(idxSpan); }
      }

      // 復元
      if(data && data.checked){
        card.classList.add('checked'); if(chk) chk.checked=true;
        if(badge){
          if((data.date||'').indexOf('\\n')>=0){
            var sp = data.date.split('\\n');
            badge.innerHTML = badgeHTML(sp[0], sp[1]||'');
          }else{
            badge.textContent = data.date||'';
          }
        }
      }
      if(!chk) return;

      var fb = fallbackFields(card);
      var station_name = pickAttr(card,'data-station', fb.station_name);
      var vehicle_model = pickAttr(card,'data-model',   fb.vehicle_model);
      var plate_number  = pickAttr(card,'data-plate',   fb.plate_number);

      function applyToggle(makeChecked){
        var p = partsNow();
        if(makeChecked){
          card.classList.add('checked'); chk.checked = true;
          if(badge) badge.innerHTML = badgeHTML(p.mmdd, p.hm);
          save(i,true, p.mmdd + '\\n' + p.hm);
          enqueue({
            ts: nowJST(), city: CITY, index: i+1,
            station_name: station_name,
            vehicle_model: vehicle_model,
            plate_number: plate_number,
            date_badge: p.mmdd, checked: true
          });
        } else {
          card.classList.remove('checked'); chk.checked = false;
          if(badge) badge.textContent='';
          save(i,false,'');
          enqueue({ city: CITY, plate_number: plate_number, delete: true });
        }
        updateCount();
        // Reorder only within the card's own container
        resortContainer(card.__origParent || card.parentNode);
      }

      function bindConfirmTarget(target){
        if(!target || target.__patchedV18d) return;
        target.__patchedV18d = true;
        target.addEventListener('click', function(ev){
          ev.stopImmediatePropagation();
          ev.preventDefault();
          var next = !chk.checked;
          if(!confirm('よろしいですか？')) return;
          setTimeout(function(){ applyToggle(next); },0);
        }, true);
      }

      // Bind to checkbox, its wrapping label and .chk-wrap (if present)
      bindConfirmTarget(chk);
      var lbl = chk.closest && chk.closest('label');
      if(lbl) bindConfirmTarget(lbl);
      var wrap = card.querySelector('.chk-wrap');
      if(wrap) bindConfirmTarget(wrap);

      // Keyboard on checkbox
      chk.addEventListener('keydown', function(ev){
        if(ev.key === ' ' || ev.key === 'Enter'){
          ev.stopImmediatePropagation();
          ev.preventDefault();
          var next = !chk.checked;
          if(!confirm('よろしいですか？')) return;
          setTimeout(function(){ applyToggle(next); },0);
        }
      }, true);

      // 既存の削除ボタン（クラス/属性のばらつきに配慮）
      var delBtn = card.querySelector('.del-btn, [data-role="delete"]');
      if(delBtn && !delBtn.__patchedV18d){
        delBtn.__patchedV18d = true;
        delBtn.addEventListener('click', function(){
          if(!confirm('この項目を未チェックに戻してログも削除します。よろしいですか？')) return;
          applyToggle(false);
        });
      }
    });

    // Final count update
    updateCount();
  }

  if(document.readyState==='complete'||document.readyState==='interactive'){ setTimeout(setup,0); }
  else { document.addEventListener('DOMContentLoaded', setup); }
})();
</script>
