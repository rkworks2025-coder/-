<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>巡回リスト</title>
  <!-- include version query to bust cache -->
  <link rel="stylesheet" href="style.css?v=8x" />
</head>
<body>
  <!-- Display current version -->
  <div class="ver">v8x</div>
  <header class="appbar">
    <div class="title">巡回リスト</div>
    <div class="btns">
      <!-- Button for initial sync from 全体管理 -->
      <button id="initSyncBtn" class="btn primary">初期同期</button>
      <!-- Button for regular sync (push→pull InspectionLog) -->
      <button id="syncBtn" class="btn primary">同期</button>
      <!-- Button to push local changes to InspectionLog only -->
      <button id="pushLogBtn" class="btn primary">データ送信</button>
    </div>
  </header>

  <main class="wrap">
    <p id="statusText" class="hint">GASから取得して各エリアに保存します。</p>

    <section class="cards">
      <a class="cardlink" href="yamato.html">
        <h2>大和市</h2>
        <div class="meta">
          <span class="chip">済 <span id="yamato-done">0</span></span>
          <span class="chip">停 <span id="yamato-stop">0</span></span>
          <span class="chip">不要 <span id="yamato-skip">0</span></span>
          <span class="chip">総 <span id="yamato-total">0</span></span>
          <span class="chip">残 <span id="yamato-rem">0</span></span>
        </div>
      </a>

      <a class="cardlink" href="ebina.html">
        <h2>海老名市</h2>
        <div class="meta">
          <span class="chip">済 <span id="ebina-done">0</span></span>
          <span class="chip">停 <span id="ebina-stop">0</span></span>
          <span class="chip">不要 <span id="ebina-skip">0</span></span>
          <span class="chip">総 <span id="ebina-total">0</span></span>
          <span class="chip">残 <span id="ebina-rem">0</span></span>
        </div>
      </a>

      <a class="cardlink" href="chofu.html">
        <h2>調布市</h2>
        <div class="meta">
          <span class="chip">済 <span id="chofu-done">0</span></span>
          <span class="chip">停 <span id="chofu-stop">0</span></span>
          <span class="chip">不要 <span id="chofu-skip">0</span></span>
          <span class="chip">総 <span id="chofu-total">0</span></span>
          <span class="chip">残 <span id="chofu-rem">0</span></span>
        </div>
      </a>

      <!-- aggregated card for all areas -->
      <div class="cardlink">
        <h2>全エリア</h2>
        <div class="meta">
          <span class="chip">済 <span id="all-done">0</span></span>
          <span class="chip">停 <span id="all-stop">0</span></span>
          <span class="chip">不要 <span id="all-skip">0</span></span>
          <span class="chip">総 <span id="all-total">0</span></span>
          <span class="chip">残 <span id="all-rem">0</span></span>
        </div>
        <div id="overallHint" class="hint">まだ同期されていません</div>
      </div>

      <p class="empty">まずは「初期同期」を押してデータを取得してください。</p>
    </section>
  </main>

  <!-- progress modal -->
  <div id="progressModal" class="modal" role="dialog" aria-modal="true" aria-label="進捗">
    <div class="dialog">
      <div id="statusTextModal">処理中…</div>
      <div class="barwrap"><div id="progressBar" class="bar"></div></div>
    </div>
  </div>

  <!-- include version query to bust cache -->
  <script src="app.js?v=8x"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof Junkai !== 'undefined' && Junkai.initIndex) {
        Junkai.initIndex();
      }
    });
  </script>
</body>
</html>
